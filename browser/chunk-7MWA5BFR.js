import{l as D}from"./chunk-T3NVU7MS.js";import{a as I,c as V,d as E,e as w,f as h,h as N,i as R,j as G,l as j}from"./chunk-LNBWFASC.js";import{B as T,e as F,l as P,o as y}from"./chunk-MLHBKMMI.js";import{$ as v,Cb as m,Kb as x,Sa as c,Ta as d,W as C,fa as S,gb as b,ib as i,mb as s,nb as n,oa as p,ob as u,pa as l,rb as f,vb as g,wb as a}from"./chunk-6KRDYWU2.js";var H=(()=>{class t{constructor(e){this._HttpClient=e,this.baseUrl="https://ecommerce.routemisr.com/api/v1/auth/"}forgetPassword(e){return this._HttpClient.post(this.baseUrl+"forgotPasswords",e)}resetCode(e){return this._HttpClient.post(this.baseUrl+"verifyResetCode",e)}resetPassword(e){return this._HttpClient.put(this.baseUrl+"resetPassword",e)}static{this.\u0275fac=function(r){return new(r||t)(v(y))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function U(t,_){if(t&1){let e=f();s(0,"section",1)(1,"form",2),g("ngSubmit",function(){p(e);let o=a();return l(o.forgetPassword())}),s(2,"label",3),m(3,"Email"),n(),u(4,"input",4),s(5,"button",5),m(6,"Forgot Password"),n()()()}if(t&2){let e=a();c(),i("formGroup",e.forgetForm)}}function A(t,_){if(t&1){let e=f();s(0,"section",1)(1,"form",2),g("ngSubmit",function(){p(e);let o=a();return l(o.resetCode())}),s(2,"label",6),m(3,"Reset Code"),n(),u(4,"input",7),s(5,"button",5),m(6,"Reset Code"),n()()()}if(t&2){let e=a();c(),i("formGroup",e.resetCodeForm)}}function q(t,_){if(t&1){let e=f();s(0,"section",1)(1,"form",2),g("ngSubmit",function(){p(e);let o=a();return l(o.resetPassword())}),s(2,"label",8),m(3,"Reset Password"),n(),u(4,"input",9),s(5,"button",5),m(6,"Reset Password"),n()()()}if(t&2){let e=a();c(),i("formGroup",e.resetPasswordFrom)}}var W=(()=>{class t{constructor(e,r,o){this._ForgetpasswordService=e,this._ToastrService=r,this._Router=o,this.step1=!0,this.step2=!1,this.step3=!1,this.email="",this.forgetForm=new w({email:new h("")}),this.resetCodeForm=new w({resetCode:new h("")}),this.resetPasswordFrom=new w({newPassword:new h("")})}forgetPassword(){this.email=this.forgetForm.value.email,this._ForgetpasswordService.forgetPassword(this.forgetForm.value).subscribe({next:e=>{this.step1=!1,this.step2=!0,this._ToastrService.success(e.message,"Success",{positionClass:"toast-bottom-right"})},error:e=>{this._ToastrService.error(e.error.message,"Error",{positionClass:"toast-bottom-right"})}})}resetCode(){this._ForgetpasswordService.resetCode(this.resetCodeForm.value).subscribe({next:e=>{this.step2=!1,this.step3=!0,this._ToastrService.success(e.message,"Success",{positionClass:"toast-bottom-right"})},error:e=>{this._ToastrService.error(e.error.message,"Error",{positionClass:"toast-bottom-right"})}})}resetPassword(){let e=this.resetPasswordFrom.value;e.email=this.email,this._ForgetpasswordService.resetPassword(e).subscribe({next:r=>{r.token&&(localStorage.setItem("etoken",r.token),this.step3=!1,this.step1=!0,this._ToastrService.success(r.message,"Success",{positionClass:"toast-bottom-right"}),this._Router.navigate(["/home"]))},error:r=>{this._ToastrService.error(r.error.message,"Error",{positionClass:"toast-bottom-right"})}})}static{this.\u0275fac=function(r){return new(r||t)(d(H),d(D),d(T))}}static{this.\u0275cmp=S({type:t,selectors:[["app-forgetpassword"]],standalone:!0,features:[x],decls:3,vars:3,consts:[["class","w-75 mt-3 mx-auto rounded bg-main-light p-3 shadow",4,"ngIf"],[1,"w-75","mt-3","mx-auto","rounded","bg-main-light","p-3","shadow"],[3,"ngSubmit","formGroup"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control"],[1,"main-btn","w-100","mt-3"],["for","resetCode"],["formControlName","resetCode","type","text","id","resetCode",1,"form-control"],["for","newPassword"],["formControlName","newPassword","type","password","id","newPassword",1,"form-control"]],template:function(r,o){r&1&&b(0,U,7,1,"section",0)(1,A,7,1,"section",0)(2,q,7,1,"section",0),r&2&&(i("ngIf",o.step1),c(),i("ngIf",o.step2),c(),i("ngIf",o.step3))},dependencies:[P,F,j,N,I,V,E,R,G]})}}return t})();export{W as ForgetpasswordComponent};
