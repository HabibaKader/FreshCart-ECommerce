import{a as A}from"./chunk-YG72RTHM.js";import{a as y,b as g,c as b,d as I,e as T,f as v,h as N,i as M,j as q,l as k}from"./chunk-LNBWFASC.js";import{B as w,C as L,e as C,l as E}from"./chunk-MLHBKMMI.js";import{Cb as m,Db as F,Kb as S,Sa as a,Ta as _,fa as h,gb as p,ib as l,mb as o,nb as i,ob as c,vb as x,wb as f}from"./chunk-6KRDYWU2.js";function D(e,s){e&1&&(o(0,"p",16),m(1,"Email is required"),i())}function G(e,s){e&1&&(o(0,"p",16),m(1,"Invalid Format"),i())}function R(e,s){if(e&1&&(o(0,"div",14),p(1,D,2,0,"p",15)(2,G,2,0,"p",15),i()),e&2){let r,t,n=f();a(),l("ngIf",(r=n.loginForm.get("email"))==null?null:r.getError("required")),a(),l("ngIf",(t=n.loginForm.get("email"))==null?null:t.getError("email"))}}function P(e,s){e&1&&(o(0,"p",16),m(1,"Password is required"),i())}function j(e,s){e&1&&(o(0,"p",16),m(1,"Password Length must be at least 6 characters"),i())}function V(e,s){if(e&1&&(o(0,"div",14),p(1,P,2,0,"p",15)(2,j,2,0,"p",15),i()),e&2){let r,t,n=f();a(),l("ngIf",(r=n.loginForm.get("password"))==null?null:r.getError("required")),a(),l("ngIf",(t=n.loginForm.get("password"))==null?null:t.getError("pattern"))}}function $(e,s){e&1&&(o(0,"span"),c(1,"i",17),i())}function z(e,s){if(e&1&&(o(0,"p",18),m(1),i()),e&2){let r=f();a(),F(r.errorMessage)}}var W=(()=>{class e{constructor(r,t){this._AuthService=r,this._Router=t,this.errorMessage="",this.isLoading=!1,this.loginForm=new T({email:new v("",[g.required,g.email]),password:new v("",[g.required,g.pattern(/^[a-zA-Z0-9_!@#$%^&*]{6,}$/)])})}handleForm(){this.isLoading=!0;let r=this.loginForm.value;this.loginForm.valid&&this._AuthService.login(r).subscribe({next:t=>{t.message=="success"&&(localStorage.setItem("etoken",t.token),this._Router.navigate(["/home"])),this.isLoading=!1},error:t=>{this.errorMessage=t.error.message,this.isLoading=!1}})}static{this.\u0275fac=function(t){return new(t||e)(_(A),_(w))}}static{this.\u0275cmp=h({type:e,selectors:[["app-login"]],standalone:!0,features:[S],decls:21,vars:6,consts:[[1,"w-75","mx-auto","shadow","rounded","p-4","my-5","bg-main-light"],[1,"my-3"],[3,"ngSubmit","formGroup"],[1,"form-item"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control"],["class","alert alert-danger p-1",4,"ngIf"],["for","password"],["formControlName","password","type","password","id","password",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center"],[1,"main-btn","mt-2",3,"disabled"],[4,"ngIf"],["routerLink","/forget",1,"link-primary"],["class","alert alert-danger p-1 mb-0 mt-2 text-center",4,"ngIf"],[1,"alert","alert-danger","p-1"],["class","mb-0",4,"ngIf"],[1,"mb-0"],[1,"fas","fa-spin","fa-spinner"],[1,"alert","alert-danger","p-1","mb-0","mt-2","text-center"]],template:function(t,n){if(t&1&&(o(0,"section",0)(1,"h1",1),m(2,"Login Now"),i(),o(3,"form",2),x("ngSubmit",function(){return n.handleForm()}),o(4,"div",3)(5,"label",4),m(6,"Email"),i(),c(7,"input",5),i(),p(8,R,3,2,"div",6),o(9,"div",3)(10,"label",7),m(11,"Password"),i(),c(12,"input",8),i(),p(13,V,3,2,"div",6),o(14,"div",9)(15,"button",10),m(16," Login "),p(17,$,2,0,"span",11),i(),o(18,"a",12),m(19,"Forgot Password"),i()()(),p(20,z,2,1,"p",13),i()),t&2){let d,u;a(3),l("formGroup",n.loginForm),a(5),l("ngIf",((d=n.loginForm.get("email"))==null?null:d.errors)&&((d=n.loginForm.get("email"))==null?null:d.touched)),a(5),l("ngIf",((u=n.loginForm.get("password"))==null?null:u.errors)&&((u=n.loginForm.get("password"))==null?null:u.touched)),a(2),l("disabled",n.loginForm.invalid),a(2),l("ngIf",n.isLoading),a(3),l("ngIf",n.errorMessage)}},dependencies:[E,C,k,N,y,b,I,M,q,L]})}}return e})();export{W as LoginComponent};
