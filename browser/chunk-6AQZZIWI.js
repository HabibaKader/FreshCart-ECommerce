import{l as N}from"./chunk-T3NVU7MS.js";import{a as M}from"./chunk-7RPU2NT2.js";import{C as j,d as P,e as V,j as F,l as O}from"./chunk-MLHBKMMI.js";import{Bb as m,Cb as s,Db as T,Eb as v,Kb as R,Mb as D,Na as I,Rb as w,Sa as l,Ta as C,Tb as y,Vb as A,Za as k,fa as E,gb as g,ib as _,mb as n,nb as o,oa as u,ob as f,pa as p,rb as S,vb as b,wb as d}from"./chunk-6KRDYWU2.js";var U=r=>["/payment",r];function $(r,h){if(r&1){let e=S();n(0,"div",12)(1,"div",13),f(2,"img",14),o(),n(3,"div",15)(4,"div")(5,"h3",16),s(6),o(),n(7,"p",17),s(8),w(9,"currency"),o(),n(10,"button",18,1),b("click",function(){let t=u(e).$implicit,a=m(11),c=d(2);return p(c.removeCartItem(t.product.id,a))}),f(12,"i",19),s(13," Remove"),o()(),n(14,"div")(15,"button",20,2),b("click",function(){let t=u(e).$implicit,a=m(16),c=m(21),x=d(2);return p(x.changeCount(t.product.id,t.count-1,a,c))}),s(17,"-"),o(),n(18,"span"),s(19),o(),n(20,"button",21,3),b("click",function(){let t=u(e).$implicit,a=m(16),c=m(21),x=d(2);return p(x.changeCount(t.product.id,t.count+1,a,c))}),s(22,"+"),o()()()()}if(r&2){let e=h.$implicit;l(2),_("src",e.product.imageCover,I)("alt",e.product.title),l(4),T(e.product.title),l(2),v("Price: ",y(9,5,e.price,"EGP "),""),l(11),v(" ",e.count," ")}}function L(r,h){if(r&1){let e=S();n(0,"section",5)(1,"div",6)(2,"h1"),s(3,"Shop Cart"),o(),n(4,"button",7),b("click",function(){u(e);let t=d();return p(t.clearCart())}),s(5,"Clear Cart"),o()(),n(6,"p",8),s(7),w(8,"currency"),o(),g(9,$,23,8,"div",9),n(10,"button",10),s(11," Payment "),f(12,"img",11),o()()}if(r&2){let e=d();l(7),v("Total Price: ",y(8,3,e.cartDetails.totalCartPrice,"EGP "),""),l(2),_("ngForOf",e.cartDetails.products),l(),_("routerLink",D(6,U,e.cartDetails._id))}}function B(r,h){r&1&&(n(0,"h2",22),s(1,"Your Cart Is Empty..."),o())}var K=(()=>{class r{constructor(e,i,t){this._CartService=e,this._ToastrService=i,this._Renderer2=t}ngOnInit(){this.getCartUser()}getCartUser(){this._CartService.getCartUser().subscribe({next:e=>{this.cartDetails=e.data},error:e=>{console.log(e)}})}removeCartItem(e,i){this._Renderer2.setAttribute(i,"disabled","true"),this._CartService.removeCartItem(e).subscribe({next:t=>{this._ToastrService.success("Product Deleted Successfully","Success",{positionClass:"toast-bottom-right"}),this.cartDetails=t.data,this._Renderer2.removeAttribute(i,"disabled"),this._CartService.cartNumber.next(t.numOfCartItems)},error:t=>{this._ToastrService.error("has error occured.","Error",{positionClass:"toast-bottom-right"}),this._Renderer2.removeAttribute(i,"disabled")}})}changeCount(e,i,t,a){i==0?this._ToastrService.info("if you sure to remove product use remove button.","Not Allowed",{positionClass:"toast-bottom-right"}):(this._Renderer2.setAttribute(a,"disabled","true"),this._Renderer2.setAttribute(t,"disabled","true"),this._CartService.updateCartCount(e,i).subscribe({next:c=>{this.cartDetails=c.data,this._Renderer2.removeAttribute(a,"disabled"),this._Renderer2.removeAttribute(t,"disabled")},error:c=>{this._Renderer2.removeAttribute(a,"disabled"),this._Renderer2.removeAttribute(t,"disabled")}}))}clearCart(){this._CartService.clearCart().subscribe({next:e=>{e.message==="success"&&(this.cartDetails=e.data,this._CartService.cartNumber.next(0))},error:e=>{this._ToastrService.error("has error occured.","Error",{positionClass:"toast-bottom-right"})}})}static{this.\u0275fac=function(i){return new(i||r)(C(M),C(N),C(k))}}static{this.\u0275cmp=E({type:r,selectors:[["app-cart"]],standalone:!0,features:[R],decls:3,vars:2,consts:[["msg",""],["btnRemove",""],["btnPlus",""],["btnMinus",""],["class","w-75 mx-auto rounded shadow bg-main-light p-3 mb-3",4,"ngIf","ngIfElse"],[1,"w-75","mx-auto","rounded","shadow","bg-main-light","p-3","mb-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"text-main"],["class","row border-bottom py-2",4,"ngFor","ngForOf"],[1,"main-btn","small","w-100","fw-bolder","mt-3",3,"routerLink"],["src","./assets/images/visa.svg",2,"height","20px","margin-left","5px"],[1,"row","border-bottom","py-2"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","justify-content-between","align-items-center"],[1,"h6"],[1,"text-main","mb-0"],[1,"p-1","mt-1","text-danger","border-0",3,"click"],[1,"fa-solid","fa-trash-can"],[1,"btn","btn-danger","small",3,"click"],[1,"btn","btn-success","small",3,"click"],[1,"text-center"]],template:function(i,t){if(i&1&&g(0,L,13,8,"section",4)(1,B,2,0,"ng-template",null,0,A),i&2){let a=m(2);_("ngIf",t.cartDetails)("ngIfElse",a)}},dependencies:[O,P,V,F,j],styles:["button[_ngcontent-%COMP%]:disabled{cursor:not-allowed!important}"]})}}return r})();export{K as CartComponent};
