import"./chunk-5QSWCEWG.js";import{a as V}from"./chunk-YPB77LM4.js";import{a as R}from"./chunk-WVJSMALQ.js";import{l as j}from"./chunk-T3NVU7MS.js";import{a as A}from"./chunk-7RPU2NT2.js";import{C as D,d as y,e as E,j as k,l as F}from"./chunk-MLHBKMMI.js";import{Bb as T,Cb as l,Db as h,Kb as W,Mb as L,Na as b,Rb as C,Sa as n,Ta as m,Tb as S,Za as I,fa as w,gb as p,ib as a,mb as s,nb as o,oa as u,ob as v,pa as f,rb as x,vb as g,wb as c}from"./chunk-6KRDYWU2.js";var P=i=>["/productdetails",i];function N(i,_){if(i&1){let t=x();s(0,"i",17),g("click",function(){u(t);let r=c().$implicit,d=c(2);return f(d.removeFromWishlist(r.id))}),o()}}function U(i,_){if(i&1){let t=x();s(0,"div",5)(1,"div",6),p(2,N,1,0,"i",7),s(3,"header",8),v(4,"img",9),s(5,"h3",10),l(6),C(7,"cuttext"),o(),s(8,"h4",11),l(9),o(),s(10,"div",12)(11,"span"),l(12),C(13,"currency"),o(),s(14,"p",13),v(15,"i",14),s(16,"span",15),l(17),o()()()(),s(18,"footer")(19,"button",16,0),g("click",function(){let r=u(t).$implicit,d=T(20),O=c(2);return f(O.addToCart(r.id,d))}),l(21,"+Add To Cart"),o()()()()}if(i&2){let t=_.$implicit,e=c(2);n(2),a("ngIf",e.wishListIds.includes(t.id)),n(),a("routerLink",L(15,P,t.id)),n(),a("src",t.imageCover,b)("title",t.title)("alt",t.title),n(2),h(S(7,9,t.title,2)),n(3),h(t.category.name),n(3),h(S(13,12,t.price,"EGP ")),n(5),h(t.ratingsAverage)}}function M(i,_){if(i&1&&(s(0,"section",2)(1,"div",3),p(2,U,22,17,"div",4),o()()),i&2){let t=c();n(2),a("ngForOf",t.wishListData)}}var Y=(()=>{class i{constructor(t,e,r,d){this._WishlistService=t,this._CartService=e,this._ToastrService=r,this._Renderer2=d,this.wishListData=[],this.wishListIds=[],this.searchValue=""}ngOnInit(){this.getUserWishlist()}getUserWishlist(){this._WishlistService.getUserWishList().subscribe({next:t=>{this.wishListData=t.data;let e=t.data.map(r=>r._id);this.wishListIds=e},error:t=>{this._ToastrService.error("has error occured.","Error")}})}removeFromWishlist(t){t&&this._WishlistService.removeFromWishList(t).subscribe({next:e=>{this._ToastrService.success(e.message,"Success"),this._WishlistService.wishListNumber.next(e.data.length),this.wishListIds=e.data,this.wishListData=this.wishListData.filter(r=>this.wishListIds.includes(r._id))},error:e=>{this._ToastrService.error("has error occured.","Error")}})}addToCart(t,e){t&&(this._Renderer2.setAttribute(e,"disabled","true"),this._CartService.addToCart(t).subscribe({next:r=>{this._ToastrService.success("Product Added To Cart.","Success"),this._Renderer2.removeAttribute(e,"disabled"),this._CartService.cartNumber.next(r.numOfCartItems)},error:r=>{this._ToastrService.error("has error occured.","Error"),this._Renderer2.removeAttribute(e,"disabled")}}))}static{this.\u0275fac=function(e){return new(e||i)(m(V),m(A),m(j),m(I))}}static{this.\u0275cmp=w({type:i,selectors:[["app-wishlist"]],standalone:!0,features:[W],decls:1,vars:1,consts:[["btnAdd",""],["class","py-5",4,"ngIf"],[1,"py-5"],[1,"row","g-4"],["class","col-sm-6 col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[1,"product","h-100"],["class","fa-solid fa-heart heart text-danger",3,"click",4,"ngIf"],["role","button",3,"routerLink"],[1,"w-100",3,"src","title","alt"],[1,"h6"],[1,"h6","text-main"],[1,"d-flex","align-items-center","justify-content-between","small","mb-1"],[1,"mb-0"],[1,"fas","fa-star","rating-color"],[1,"text-muted"],[1,"main-btn","mt-1","w-100",3,"click"],[1,"fa-solid","fa-heart","heart","text-danger",3,"click"]],template:function(e,r){e&1&&p(0,M,3,1,"section",1),e&2&&a("ngIf",r.wishListData.length>0)},dependencies:[F,y,E,k,D,R]})}}return i})();export{Y as WishlistComponent};
